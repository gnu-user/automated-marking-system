# Clone Detection

rails generate model CloneIncident similarity:float
#Needs 2 DiffFiles
has_many :diff_files
has_many :diff_entries, through: :diff_files
has_many :lines, through: :diff_entries

rails generate model DiffFile name:string
#Needs many DiffEntry
#Links to 1 CloneIncident
belongs_to :clone_incident
has_many :diff_entries
has_many :lines, through: :diff_entries

rails generate model DiffEntry position:string
#Needs many Line
#Links to 1 DiffFile
belongs_to :diff_file
has_many :lines

rails generate model Line text_line:text
#Links to 1 DiffEntry
belongs_to :diff_entry

rails generate migration AddCloneIncidentRelationships

# Compiler Issues

rails generate model CompilerIssue filename:text
#Needs many Issue
has_many :issues

rails generate model Issue method:string line_number:integer col_number:integer issue_type:string message:text relavent_code:text
#Links to 1 CompilerIssue
belongs_to :compiler_issue

rails generate migration AddCompilerIssueRelationships

# Static Analysis

rails generate model StaticAnalysis filename:string
#Needs many StaticIssue
has_many :static_issues

rails generate model StaticIssue line_number:integer type:string description:text
#Links to 1 CompilerIssue
belongs_to :static_analysis

rails generate migration AddStaticAnalysisRelationships

# Test
#TODO update
rails generate model Test name:string description:text result:boolean sample:boolean
# Needs many IO_Elements
has_many :io_elements

rails generate model IO_Element value:text input:boolean
# Links to 1 Test
belongs_to :test

rails generate migration AddTestRelationships

# Student

#TODO fix this to properly handle passwords
rails generate model Student student_id:string password:string
has_many :submissions
belongs_to :admin

rails generate model Submission code:text mark:integer
belongs_to :student
has_one :assignment
has_one :feedback

# Should this show how the student faired at the prof's testing stuff / static and code analysis
rails generate model Feedback ?

# Admin

rails generate model Admin student_id:string password:string
has_many :assignments
has_many :students

rails generate model Assignment name:string posted:date due:date submissions:integer avg_grade:integer 
belongs_to :admin
has_many :compiler_issues
has_many :static_analyses
has_many :test #both sample and actual
has_one :grading_breadown

rails generate model GradingBreakdown max_time:integer attempts:integer memory_leaks:boolean performance:boolean stylistic:boolean bounds:boolean duplication:boolean code_weight:integer test_case_weight:integer
belongs_to :assignment